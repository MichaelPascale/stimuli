<!DOCTYPE html>
<html>
    <!-- PCRM Blur-Level Norming Online Study 
         Copyright (c) 2025, Michael Pascale <mpascale@bu.edu>. MIT Licensed. -->
    <head>
        <style>
            :root {
                --pcrm-stim-width: 100mm;
                --pcrm-menu-height: 10mm;

                --pcrm-interface-color-fg: grey;
                --pcrm-interface-color-bg: white;
                --pcrm-interface-color-text: black;

                --pcrm-interface-font: Arial, monospace;
            }

            body {
                background-color: var(--pcrm-interface-color-bg);
                font-family: var(--pcrm-interface-font);
                font-weight: bold;
                font-size: 5mm;
            }

            .presentation {
                position:   absolute;
                margin:     auto;
                left:       0;
                right:      0;
                top:        0;
                bottom:     0;
                width:      var(--pcrm-stim-width);
                height:     var(--pcrm-stim-width);
                /* border:     1mm solid var(--pcrm-interface-color-fg); */
            }

            .stim {
                width: 100%;
                height: 100%;
                /* Blur wiill be changed programmatically */
                filter: blur(20px);
            }

            .menu {
                position: absolute;
                bottom: -20mm;
                width: var(--pcrm-stim-width);
                height: var(--pcrm-menu-height);
                display: flex;
                align-items: center;
                justify-content: space-evenly;
            }
            
            button {
                font-family: inherit;
                font-size: inherit;
            }   
        </style>
        <script>
            var img_stim;
            var menus = {};
            var datalog  = {
                "date": (new Date()).toISOString(),
                "version": "0.0.1",
                "events": []
            };

            function stim_advance() {
                

            };

            function stim_next() {
                menu_show('sel')
            };

            function stim_check() {
                menu_show('chk');
                img_stim.style.filter='blur(0)';
            };

            function menu_show(menu) {
                Object.entries(menus).forEach(([name, el]) => {
                    if (name == menu)
                        el.style.display = 'flex';
                    else
                        el.style.display = 'none';
                });
            };

            function log(event) {
                const timestamp = (new Date()).toISOString();
                datalog["events"].push({"time": timestamp, "event": event});
            };

            addEventListener("DOMContentLoaded", function (ev) {

                img_stim     = document.getElementById("stim");

                menus['sel'] = document.getElementById("menu-select");
                menus['chk'] = document.getElementById("menu-check");
                menus['nam'] = document.getElementById("menu-name")

                Object.values(menus).forEach(el => el.style.display = 'none');

                stim_next();
            });
        </script>
    </head>
    <body>
        Press SPACE to advance. You earn more points for stopping early.
        <div class="presentation">
            
            <!-- The stimulus image -->
            <img id="stim" class="stim" src="/things/images_THINGSplus-CC0/gt75sdlt25-num/012.jpg">
            
            <!-- Select the object -->
            <div id="menu-select" class="menu">
                <button>I know it!</button>
                <button>Not sure</button>
            </div>

            <!-- Determine if guess was correct (clarified) -->
            <div id="menu-check" class="menu">
                Were you correct? <button>Yes</button>
                <button>No</button>
            </div>
            
            <!-- Name the object -->
            <div id="menu-name" class="menu">
                <button>Cancel</button>
                <input type="text" placeholder="It's a... (answer here)">
                <button>Submit</button>
            </div>
        </div>
    </body>
</html>